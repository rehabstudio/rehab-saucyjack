"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),SaucyJack=exports.SaucyJack=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,e);var i={DEBUG:!1,TRIGGER_LINE_POS:.85,ENTITY_SELECTOR:".saucy-el",ACTIVE_CLASS:"saucy-active",INVERT_BEHAVIOUR:!1,TRIGGER_POS:"top"};if(t instanceof Object||!(t instanceof Array))for(var n in i)t[n]=t[n]?t[n]:i[n];else t=i;this.options=t,this._entities=[],this._triggerLinePixelPos=0,this._scrollPos=0,this._debugEl=null;for(var s=document.querySelectorAll(this.options.ENTITY_SELECTOR),o=0,l=s.length;l>o;o++)this.addElement(s[o]);this._getScrollPos(),this._updateTriggerLine(),this._updateEntities();var a={position:"fixed",left:"0",width:"100%",height:"0px",borderTop:"2px dashed red",zIndex:"999999",opacity:"0.2"};if(this.options.DEBUG){this._debugEl=document.createElement("div"),this._debugEl.classList.add("saucy-debug"),document.body.appendChild(this._debugEl);for(var r in a)this._debugEl.style[r]=a[r];this._updateDebugEl()}window.addEventListener("resize",this._onResize.bind(this),!1),window.addEventListener("scroll",this._onScroll.bind(this),!1)}return _createClass(e,[{key:"_updateEntities",value:function(){var e=this.options.TRIGGER_POS;this._entities.forEach(function(t){var i=t.el.getBoundingClientRect();"center"===e?t.yTop=i.top+.5*i.height:t.yTop=i[e];var n=this._triggerLinePixelPos>t.yTop;this._setActiveStatus(t,n)}.bind(this))}},{key:"_getScrollPos",value:function(){this._scrollPos=window.scrollY||(window.pageYOffset||document.body.scrollTop)-(document.body.clientTop||0)}},{key:"_updateTriggerLine",value:function(){this._triggerLinePixelPos=Math.round((window.innerHeight||document.documentElement.clientHeight)*this.options.TRIGGER_LINE_POS)}},{key:"_setActiveStatus",value:function(e,t){if("boolean"!=typeof t&&(t=!0),e.active!==t){e.active=t;var i=t&&!this.options.INVERT_BEHAVIOUR?"add":"remove";e.el.classList[i](this.options.ACTIVE_CLASS)}}},{key:"_onResize",value:function(){this._updateTriggerLine(),this._updateEntities(),this.options.DEBUG&&this._updateDebugEl()}},{key:"_onScroll",value:function(){this._getScrollPos(),this._updateEntities(),this.options.DEBUG&&this._updateDebugEl()}},{key:"_updateDebugEl",value:function(){this._debugEl.style.top=this._triggerLinePixelPos+"px"}},{key:"addElement",value:function(e){var t={el:e,yTop:0,active:!1};this._entities.push(t)}}]),e}();